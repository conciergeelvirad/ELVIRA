# CRUD Operations Audit - Hotel Management Queries

**Audit Date:** October 11, 2025  
**Location:** `src/hooks/queries/hotel-management/`

---

## ‚úÖ 1. useGuestsQueries.ts

| Operation  | Hook Name               | Status      | Notes                                        |
| ---------- | ----------------------- | ----------- | -------------------------------------------- |
| **List**   | `useGuests(hotelId)`    | ‚úÖ Complete | Fetches all guests with joined personal data |
| **View**   | `useGuestById(guestId)` | ‚úÖ Complete | Fetches single guest with full details       |
| **Create** | `useCreateGuest()`      | ‚úÖ Complete | Creates guest + personal data (2 tables)     |
| **Update** | `useUpdateGuest()`      | ‚úÖ Complete | Updates guest and/or personal data           |
| **Delete** | `useDeleteGuest()`      | ‚úÖ Complete | Deletes with proper FK handling              |

**Summary:** ‚úÖ **COMPLETE** - All CRUD operations implemented

---

## ‚úÖ 2. useAmenitiesQueries.ts

| Operation  | Hook Name               | Status      | Notes                                |
| ---------- | ----------------------- | ----------- | ------------------------------------ |
| **List**   | `useAmenities(hotelId)` | ‚úÖ Complete | Fetches all active amenities         |
| **View**   | `useAmenityDetails(id)` | ‚úÖ Complete | Fetches single amenity               |
| **Create** | `useCreateAmenity()`    | ‚úÖ Complete | Creates new amenity                  |
| **Update** | `useUpdateAmenity()`    | ‚úÖ Complete | Updates amenity                      |
| **Delete** | `useDeleteAmenity()`    | ‚úÖ Complete | Soft delete (sets is_active = false) |

**Summary:** ‚úÖ **COMPLETE** - All CRUD operations implemented

---

## ‚úÖ 3. useProductQueries.ts

| Operation  | Hook Name               | Status      | Notes                       |
| ---------- | ----------------------- | ----------- | --------------------------- |
| **List**   | `useProducts(hotelId)`  | ‚úÖ Complete | Fetches all active products |
| **View**   | `useProductDetails(id)` | ‚úÖ Complete | Fetches single product      |
| **Create** | `useCreateProduct()`    | ‚úÖ Complete | Creates new product         |
| **Update** | `useUpdateProduct()`    | ‚úÖ Complete | Updates product             |
| **Delete** | `useDeleteProduct()`    | ‚úÖ Complete | Hard delete from database   |

**Additional Queries:**

- `useProductCategories(hotelId)` - Fetches unique categories
- `useMiniBarProducts(hotelId)` - Fetches minibar-specific products

**Summary:** ‚úÖ **COMPLETE** - All CRUD operations implemented

---

## ‚úÖ 4. useRestaurantQueries.ts

| Operation  | Hook Name                 | Status      | Notes                          |
| ---------- | ------------------------- | ----------- | ------------------------------ |
| **List**   | `useRestaurants(hotelId)` | ‚úÖ Complete | Fetches all restaurants        |
| **View**   | N/A                       | ‚ö†Ô∏è Missing  | No single restaurant view hook |
| **Create** | `useCreateRestaurant()`   | ‚úÖ Complete | Creates new restaurant         |
| **Update** | `useUpdateRestaurant()`   | ‚úÖ Complete | Updates restaurant             |
| **Delete** | `useDeleteRestaurant()`   | ‚úÖ Complete | Hard delete from database      |

**Additional Queries:**

- `useRestaurantMenuItems(restaurantId)` - Fetches menu items
- `useRestaurantDineInOrders(hotelId)` - Fetches dine-in orders

**Summary:** ‚ö†Ô∏è **MOSTLY COMPLETE** - Missing single restaurant view hook (can use list and filter)

---

## ‚úÖ 5. useTaskQueries.ts

| Operation  | Hook Name           | Status      | Notes                             |
| ---------- | ------------------- | ----------- | --------------------------------- |
| **List**   | `useTasks(hotelId)` | ‚úÖ Complete | Fetches all tasks with staff info |
| **View**   | `useTask(taskId)`   | ‚úÖ Complete | Fetches single task               |
| **Create** | `useCreateTask()`   | ‚úÖ Complete | Creates new task                  |
| **Update** | `useUpdateTask()`   | ‚úÖ Complete | Updates task                      |
| **Delete** | `useDeleteTask()`   | ‚úÖ Complete | Hard delete from database         |

**Additional Queries:**

- `useTasksByStatus(hotelId, status)` - Filtered by status
- `useTasksByStaff(staffId)` - Filtered by staff
- `useUpdateTaskStatus()` - Quick status update
- `useAssignTask()` - Assign task to staff

**Summary:** ‚úÖ **COMPLETE** - All CRUD operations implemented + extras

---

## ‚úÖ 6. useAbsenceRequestQueries.ts

| Operation  | Hook Name                      | Status      | Notes                        |
| ---------- | ------------------------------ | ----------- | ---------------------------- |
| **List**   | `useAbsenceRequests(hotelId)`  | ‚úÖ Complete | Fetches all absence requests |
| **View**   | `useAbsenceRequest(requestId)` | ‚úÖ Complete | Fetches single request       |
| **Create** | `useCreateAbsenceRequest()`    | ‚úÖ Complete | Creates new absence request  |
| **Update** | `useUpdateAbsenceRequest()`    | ‚úÖ Complete | Updates absence request      |
| **Delete** | `useDeleteAbsenceRequest()`    | ‚úÖ Complete | Hard delete from database    |

**Additional Queries:**

- `useAbsenceRequestsByStatus(hotelId, status)` - Filtered by status
- `useAbsenceRequestsByStaff(staffId)` - Filtered by staff
- `useUpdateAbsenceRequestStatus()` - Quick status update

**Summary:** ‚úÖ **COMPLETE** - All CRUD operations implemented + extras

---

## ‚ö†Ô∏è 7. useAnnouncementQueries.ts

| Operation  | Hook Name                   | Status      | Notes                            |
| ---------- | --------------------------- | ----------- | -------------------------------- |
| **List**   | `useAnnouncements(hotelId)` | ‚úÖ Complete | Fetches all announcements        |
| **View**   | N/A                         | ‚ö†Ô∏è Missing  | No single announcement view hook |
| **Create** | `useCreateAnnouncement()`   | ‚úÖ Complete | Creates new announcement         |
| **Update** | `useUpdateAnnouncement()`   | ‚úÖ Complete | Updates announcement             |
| **Delete** | `useDeleteAnnouncement()`   | ‚úÖ Complete | Hard delete from database        |

**Summary:** ‚ö†Ô∏è **MOSTLY COMPLETE** - Missing single view hook (can use list and filter)

---

## ‚ö†Ô∏è 8. useAmenityRequestQueries.ts

| Operation  | Hook Name                         | Status      | Notes                        |
| ---------- | --------------------------------- | ----------- | ---------------------------- |
| **List**   | `useAmenityRequests(hotelId)`     | ‚úÖ Complete | Fetches all amenity requests |
| **View**   | N/A                               | ‚ö†Ô∏è Missing  | No single request view hook  |
| **Create** | N/A                               | ‚ùå Missing  | No create hook               |
| **Update** | `useUpdateAmenityRequestStatus()` | ‚úÖ Partial  | Only updates status          |
| **Delete** | `useDeleteAmenityRequest()`       | ‚úÖ Complete | Hard delete from database    |

**Summary:** ‚ùå **INCOMPLETE** - Missing CREATE and full UPDATE, missing VIEW

---

## ‚ö†Ô∏è 9. useShopOrderQueries.ts

| Operation  | Hook Name                    | Status      | Notes                     |
| ---------- | ---------------------------- | ----------- | ------------------------- |
| **List**   | `useShopOrders(hotelId)`     | ‚úÖ Complete | Fetches all shop orders   |
| **View**   | N/A                          | ‚ö†Ô∏è Missing  | No single order view hook |
| **Create** | N/A                          | ‚ùå Missing  | No create hook            |
| **Update** | `useUpdateShopOrderStatus()` | ‚úÖ Partial  | Only updates status       |
| **Delete** | `useDeleteShopOrder()`       | ‚úÖ Complete | Hard delete from database |

**Summary:** ‚ùå **INCOMPLETE** - Missing CREATE and full UPDATE, missing VIEW

---

## ‚ö†Ô∏è 10. useEmergencyContactQueries.ts

| Operation  | Hook Name                | Status      | Notes                          |
| ---------- | ------------------------ | ----------- | ------------------------------ |
| **List**   | `useEmergencyContacts()` | ‚úÖ Complete | Fetches all emergency contacts |
| **View**   | N/A                      | ‚ö†Ô∏è Missing  | No single contact view hook    |
| **Create** | N/A                      | ‚ùå Missing  | No create hook                 |
| **Update** | N/A                      | ‚ùå Missing  | No update hook                 |
| **Delete** | N/A                      | ‚ùå Missing  | No delete hook                 |

**Summary:** ‚ùå **INCOMPLETE** - Only has LIST operation

---

## ‚ö†Ô∏è 11. useStaffQueries.ts

| Operation  | Hook Name                         | Status      | Notes                     |
| ---------- | --------------------------------- | ----------- | ------------------------- |
| **List**   | `useHotelStaffWithPersonalData()` | ‚úÖ Complete | Fetches all staff         |
| **View**   | N/A                               | ‚ö†Ô∏è Missing  | No single staff view hook |
| **Create** | N/A                               | ‚ùå Missing  | No create hook            |
| **Update** | N/A                               | ‚ùå Missing  | No update hook            |
| **Delete** | N/A                               | ‚ùå Missing  | No delete hook            |

**Summary:** ‚ùå **INCOMPLETE** - Only has LIST operation

---

## üìä Overall Summary

| File                       | List | View | Create | Update | Delete | Status             |
| -------------------------- | ---- | ---- | ------ | ------ | ------ | ------------------ |
| useGuestsQueries           | ‚úÖ   | ‚úÖ   | ‚úÖ     | ‚úÖ     | ‚úÖ     | ‚úÖ Complete        |
| useAmenitiesQueries        | ‚úÖ   | ‚úÖ   | ‚úÖ     | ‚úÖ     | ‚úÖ     | ‚úÖ Complete        |
| useProductQueries          | ‚úÖ   | ‚úÖ   | ‚úÖ     | ‚úÖ     | ‚úÖ     | ‚úÖ Complete        |
| useTaskQueries             | ‚úÖ   | ‚úÖ   | ‚úÖ     | ‚úÖ     | ‚úÖ     | ‚úÖ Complete        |
| useAbsenceRequestQueries   | ‚úÖ   | ‚úÖ   | ‚úÖ     | ‚úÖ     | ‚úÖ     | ‚úÖ Complete        |
| useRestaurantQueries       | ‚úÖ   | ‚ö†Ô∏è   | ‚úÖ     | ‚úÖ     | ‚úÖ     | ‚ö†Ô∏è Mostly Complete |
| useAnnouncementQueries     | ‚úÖ   | ‚ö†Ô∏è   | ‚úÖ     | ‚úÖ     | ‚úÖ     | ‚ö†Ô∏è Mostly Complete |
| useAmenityRequestQueries   | ‚úÖ   | ‚ö†Ô∏è   | ‚ùå     | ‚ö†Ô∏è     | ‚úÖ     | ‚ùå Incomplete      |
| useShopOrderQueries        | ‚úÖ   | ‚ö†Ô∏è   | ‚ùå     | ‚ö†Ô∏è     | ‚úÖ     | ‚ùå Incomplete      |
| useEmergencyContactQueries | ‚úÖ   | ‚ùå   | ‚ùå     | ‚ùå     | ‚ùå     | ‚ùå Incomplete      |
| useStaffQueries            | ‚úÖ   | ‚ùå   | ‚ùå     | ‚ùå     | ‚ùå     | ‚ùå Incomplete      |

---

## üéØ Recommendations

### High Priority (Missing Essential Operations)

1. **useEmergencyContactQueries** - Add Create, Update, Delete
2. **useStaffQueries** - Add View, Create, Update, Delete
3. **useAmenityRequestQueries** - Add Create, full Update
4. **useShopOrderQueries** - Add Create, full Update

### Medium Priority (Missing View Hooks)

5. **useRestaurantQueries** - Add `useRestaurantById()`
6. **useAnnouncementQueries** - Add `useAnnouncementById()`
7. **useAmenityRequestQueries** - Add `useAmenityRequestById()`
8. **useShopOrderQueries** - Add `useShopOrderById()`

---

## ‚úÖ Fully Complete Files (5/11)

1. ‚úÖ **useGuestsQueries.ts** - All CRUD operations
2. ‚úÖ **useAmenitiesQueries.ts** - All CRUD operations
3. ‚úÖ **useProductQueries.ts** - All CRUD operations
4. ‚úÖ **useTaskQueries.ts** - All CRUD operations
5. ‚úÖ **useAbsenceRequestQueries.ts** - All CRUD operations

---

## Status Legend

- ‚úÖ **Complete** - Operation fully implemented
- ‚ö†Ô∏è **Partial** - Operation partially implemented or can be worked around
- ‚ùå **Missing** - Operation not implemented
